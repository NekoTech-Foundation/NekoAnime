const Ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};Ce();var Oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},le={exports:{}};const _e=e=>typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"?()=>{const t=crypto.getRandomValues(new Uint8Array(1))[0];return(t>=e?t%e:t).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),he=(e=7,t=!1)=>Array.from({length:e},_e(t?16:36)).join("");le.exports=he;le.exports.default=he;var X=le.exports,Ie=()=>`uid::${X(7)}`,Re=(e,t=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&t.every(r=>r in e),Pe=e=>{try{const t=JSON.parse(e);return Re(t)?t:null}catch{return null}},Ne=()=>{let e=[];return{add:(...t)=>{e=[...e,...t]},remove:t=>{e=typeof t=="string"?e.filter(r=>r.message.transactionId!==t):e.filter(r=>!t.includes(r))},entries:()=>e}},B=class{static toBackground(e,t){return e.postMessage(t)}static toExtensionContext(e,t){return e.postMessage(t)}},De=Object.defineProperty,He=Object.defineProperties,Le=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,fe=(e,t,r)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I=(e,t)=>{for(var r in t||(t={}))Fe.call(t,r)&&fe(e,r,t[r]);if(de)for(var r of de(t))Ue.call(t,r)&&fe(e,r,t[r]);return e},ce=(e,t)=>He(e,Le(t)),je=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,ge=e=>{const[,t,r,n]=e.match(je)||[];return{context:t,tabId:+r,frameId:n?+n:void 0}},K=({context:e,tabId:t,frameId:r})=>["popup","options"].includes(e)?e:`${e}@${t}${r?`.${r}`:""}`;const qe=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],ie=Symbol(".toJSON was called"),Be=e=>{e[ie]=!0;const t=e.toJSON();return delete e[ie],t},be=({from:e,seen:t,to_:r,forceEnumerable:n,maxDepth:i,depth:o})=>{const s=r||(Array.isArray(e)?[]:{});if(t.push(e),o>=i)return s;if(typeof e.toJSON=="function"&&e[ie]!==!0)return Be(e);for(const[a,l]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(l)){s[a]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){s[a]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){s[a]=l;continue}if(!t.includes(e[a])){o++,s[a]=be({from:e[a],seen:[...t],forceEnumerable:n,maxDepth:i,depth:o});continue}s[a]="[Circular]"}}for(const{property:a,enumerable:l}of qe)typeof e[a]=="string"&&Object.defineProperty(s,a,{value:e[a],enumerable:n?!0:l,configurable:!0,writable:!0});return s};function $e(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return typeof e=="object"&&e!==null?be({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}let ye=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach(r=>r(...t))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter(r=>r!==t)}});var We=(e,t,r)=>{const n=X(),i=new Map,o=new Map,s=a=>{if(a.destination.context===e&&!a.destination.frameId&&!a.destination.tabId){r==null||r(a);const{transactionId:l,messageID:m,messageType:d}=a,T=()=>{const x=i.get(l);if(x){const{err:h,data:k}=a;if(h){const w=h,z=self[w.name],U=new(typeof z=="function"?z:Error)(w.message);for(const j in w)U[j]=w[j];x.reject(U)}else x.resolve(k);i.delete(l)}},_=async()=>{let x,h,k=!1;try{const w=o.get(m);if(typeof w=="function")x=await w({sender:a.origin,id:m,data:a.data,timestamp:a.timestamp});else throw k=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${m}'`)}catch(w){h=w}finally{if(h&&(a.err=$e(h)),s(ce(I({},a),{messageType:"reply",data:x,origin:{context:e,tabId:null},destination:a.origin,hops:[]})),h&&!k)throw x}};switch(d){case"reply":return T();case"message":return _()}}return a.hops.push(`${e}::${n}`),t(a)};return{handleMessage:s,endTransaction:a=>{const l=i.get(a);l==null||l.reject("Transaction was ended before it could complete"),i.delete(a)},sendMessage:(a,l,m="background")=>{const d=typeof m=="string"?ge(m):m,T="Bridge#sendMessage ->";if(!d.context)throw new TypeError(`${T} Destination must be any one of known destinations`);return new Promise((_,x)=>{const h={messageID:a,data:l,destination:d,messageType:"message",transactionId:X(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};i.set(h.transactionId,{resolve:_,reject:x});try{s(h)}catch(k){i.delete(h.transactionId),x(k)}})},onMessage:(a,l)=>(o.set(a,l),()=>o.delete(a))}},L=class{constructor(e,t){this.endpointRuntime=e,this.streamInfo=t,this.emitter=ye(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},L.initDone||(e.onMessage("__crx_bridge_stream_transfer__",r=>{const{streamId:n,streamTransfer:i,action:o}=r.data,s=L.openStreams.get(n);s&&!s.isClosed&&(o==="transfer"&&s.emitter.emit("message",i),o==="close"&&(L.openStreams.delete(n),s.handleStreamClose()))}),L.initDone=!0),L.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,t){const r=this.emitter.on(e,t);return Object.assign(r,{dispose:r,close:r})}},Y=L;Y.initDone=!1;Y.openStreams=new Map;var Ge=e=>{const t=new Map,r=new Map,n=ye();e.onMessage("__crx_bridge_stream_open__",s=>new Promise(a=>{const{sender:l,data:m}=s,{channel:d}=m;let T=!1,_=()=>{};const x=()=>{const h=r.get(d);typeof h=="function"?(h(new Y(e,ce(I({},m),{endpoint:l}))),T&&_(),a(!0)):T||(T=!0,_=n.on("did-change-stream-callbacks",x))};x()}));async function i(s,a){if(t.has(s))throw new Error("webext-bridge: A Stream is already open at this channel");const l=typeof a=="string"?ge(a):a,m={streamId:X(),channel:s,endpoint:l},d=new Y(e,m);return d.onClose(()=>t.delete(s)),await e.sendMessage("__crx_bridge_stream_open__",m,l),t.set(s,d),d}function o(s,a){if(r.has(s))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");r.set(s,a),n.emit("did-change-stream-callbacks")}return{openStream:i,onOpenStreamChannel:o}},xe={exports:{}};(function(e,t){(function(r,n){n(e)})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:Oe,function(r){if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser=="undefined"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",i="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",o=s=>{const a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(g,f=void 0){super(f),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const m=c=>c&&typeof c=="object"&&typeof c.then=="function",d=(c,g)=>(...f)=>{s.runtime.lastError?c.reject(new Error(s.runtime.lastError.message)):g.singleCallbackArg||f.length<=1&&g.singleCallbackArg!==!1?c.resolve(f[0]):c.resolve(f)},T=c=>c==1?"argument":"arguments",_=(c,g)=>function(p,...y){if(y.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${T(g.minArgs)} for ${c}(), got ${y.length}`);if(y.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${T(g.maxArgs)} for ${c}(), got ${y.length}`);return new Promise((E,S)=>{if(g.fallbackToNoCallback)try{p[c](...y,d({resolve:E,reject:S},g))}catch(u){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,u),p[c](...y),g.fallbackToNoCallback=!1,g.noCallback=!0,E()}else g.noCallback?(p[c](...y),E()):p[c](...y,d({resolve:E,reject:S},g))})},x=(c,g,f)=>new Proxy(g,{apply(p,y,E){return f.call(y,c,...E)}});let h=Function.call.bind(Object.prototype.hasOwnProperty);const k=(c,g={},f={})=>{let p=Object.create(null),y={has(S,u){return u in c||u in p},get(S,u,M){if(u in p)return p[u];if(!(u in c))return;let b=c[u];if(typeof b=="function")if(typeof g[u]=="function")b=x(c,c[u],g[u]);else if(h(f,u)){let D=_(u,f[u]);b=x(c,c[u],D)}else b=b.bind(c);else if(typeof b=="object"&&b!==null&&(h(g,u)||h(f,u)))b=k(b,g[u],f[u]);else if(h(f,"*"))b=k(b,g[u],f["*"]);else return Object.defineProperty(p,u,{configurable:!0,enumerable:!0,get(){return c[u]},set(D){c[u]=D}}),b;return p[u]=b,b},set(S,u,M,b){return u in p?p[u]=M:c[u]=M,!0},defineProperty(S,u,M){return Reflect.defineProperty(p,u,M)},deleteProperty(S,u){return Reflect.deleteProperty(p,u)}},E=Object.create(c);return new Proxy(E,y)},w=c=>({addListener(g,f,...p){g.addListener(c.get(f),...p)},hasListener(g,f){return g.hasListener(c.get(f))},removeListener(g,f){g.removeListener(c.get(f))}}),z=new l(c=>typeof c!="function"?c:function(f){const p=k(f,{},{getContent:{minArgs:0,maxArgs:0}});c(p)});let U=!1;const j=new l(c=>typeof c!="function"?c:function(f,p,y){let E=!1,S,u=new Promise(q=>{S=function(O){U||(console.warn(i,new Error().stack),U=!0),E=!0,q(O)}}),M;try{M=c(f,p,S)}catch(q){M=Promise.reject(q)}const b=M!==!0&&m(M);if(M!==!0&&!b&&!E)return!1;const D=q=>{q.then(O=>{y(O)},O=>{let te;O&&(O instanceof Error||typeof O.message=="string")?te=O.message:te="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:te})}).catch(O=>{console.error("Failed to send onMessage rejected reply",O)})};return D(b?M:u),!0}),Me=({reject:c,resolve:g},f)=>{s.runtime.lastError?s.runtime.lastError.message===n?g():c(new Error(s.runtime.lastError.message)):f&&f.__mozWebExtensionPolyfillReject__?c(new Error(f.message)):g(f)},ue=(c,g,f,...p)=>{if(p.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${T(g.minArgs)} for ${c}(), got ${p.length}`);if(p.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${T(g.maxArgs)} for ${c}(), got ${p.length}`);return new Promise((y,E)=>{const S=Me.bind(null,{resolve:y,reject:E});p.push(S),f.sendMessage(...p)})},ke={devtools:{network:{onRequestFinished:w(z)}},runtime:{onMessage:w(j),onMessageExternal:w(j),sendMessage:ue.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:ue.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},re={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":re},services:{"*":re},websites:{"*":re}},k(s,ke,a)};r.exports=o(chrome)}else r.exports=globalThis.browser})})(xe);var N=xe.exports,W=Ne(),v=new Map,F=new Map,Z=new Map,we=(e,t)=>(F.set(e,(F.get(e)||new Set).add(t)),()=>{const r=F.get(e);(r==null?void 0:r.delete(t))&&(r==null?void 0:r.size)===0&&F.delete(e)}),Ee=(e,t)=>{Z.set(e,(Z.get(e)||new Set).add(t))},P=e=>({withFingerprint:t=>{const r=i=>({and:()=>i}),n={aboutIncomingMessage:i=>{const o=v.get(e);return B.toExtensionContext(o.port,{status:"incoming",message:i}),r(n)},aboutSuccessfulDelivery:i=>{const o=v.get(e);return B.toExtensionContext(o.port,{status:"delivered",receipt:i}),r(n)},aboutMessageUndeliverability:(i,o)=>{const s=v.get(e);return(s==null?void 0:s.fingerprint)===t&&B.toExtensionContext(s.port,{status:"undeliverable",resolvedDestination:i,message:o}),r(n)},whenDeliverableTo:i=>{const o=()=>{const s=v.get(e);if((s==null?void 0:s.fingerprint)===t&&v.has(i))return B.toExtensionContext(s.port,{status:"deliverable",deliverableTo:i}),!0};if(!o()){const s=we(i,o);Ee(t,s)}return r(n)},aboutSessionEnded:i=>{const o=v.get(e);return(o==null?void 0:o.fingerprint)===t&&B.toExtensionContext(o.port,{status:"terminated",fingerprint:i}),r(n)}};return n}}),ze=Ie(),ee=We("background",e=>{if(e.origin.context==="background"&&e.destination.context!=="background"&&!e.destination.tabId)throw new TypeError("When sending messages from background page, use @tabId syntax to target specific tab");const t=K(I(I({},e.origin),e.origin.context==="window"&&{context:"content-script"})),r=K(ce(I(I({},e.destination),e.destination.context==="window"&&{context:"content-script"}),{tabId:e.destination.tabId||e.origin.tabId}));e.destination.tabId=null,e.destination.frameId=null;const n=v.get(r),i=v.get(t),o=()=>{P(r).withFingerprint(n.fingerprint).aboutIncomingMessage(e);const s={message:e,to:n.fingerprint,from:{endpointId:t,fingerprint:i==null?void 0:i.fingerprint}};e.messageType==="message"&&W.add(s),e.messageType==="reply"&&W.remove(e.messageID),i&&P(t).withFingerprint(i.fingerprint).aboutSuccessfulDelivery(s)};n!=null&&n.port?o():e.messageType==="message"&&(e.origin.context==="background"?we(r,o):i&&P(t).withFingerprint(i.fingerprint).aboutMessageUndeliverability(r,e).and().whenDeliverableTo(r))},e=>{const t=K(I(I({},e.origin),e.origin.context==="window"&&{context:"content-script"})),r=v.get(t),n={message:e,to:ze,from:{endpointId:t,fingerprint:r.fingerprint}};P(t).withFingerprint(r.fingerprint).aboutSuccessfulDelivery(n)});N.runtime.onConnect.addListener(e=>{var t;const r=Pe(e.name);if(!r)return;r.endpointName||(r.endpointName=K({context:"content-script",tabId:e.sender.tab.id,frameId:e.sender.frameId}));const{tabId:n,frameId:i}=ge(r.endpointName);v.set(r.endpointName,{fingerprint:r.fingerprint,port:e}),(t=F.get(r.endpointName))==null||t.forEach(o=>o()),F.delete(r.endpointName),Ee(r.fingerprint,()=>{const o=W.entries().filter(s=>s.to===r.fingerprint);W.remove(o),o.forEach(s=>{s.from.endpointId==="background"?ee.endTransaction(s.message.transactionId):P(s.from.endpointId).withFingerprint(s.from.fingerprint).aboutSessionEnded(r.fingerprint)})}),e.onDisconnect.addListener(()=>{var o,s;((o=v.get(r.endpointName))==null?void 0:o.fingerprint)===r.fingerprint&&v.delete(r.endpointName),(s=Z.get(r.fingerprint))==null||s.forEach(a=>a()),Z.delete(r.fingerprint)}),e.onMessage.addListener(o=>{var s,a;if(o.type==="sync"){const l=[...v.values()].map(d=>d.fingerprint),m=o.pendingResponses.filter(d=>l.includes(d.to));W.add(...m),o.pendingResponses.filter(d=>!l.includes(d.to)).forEach(d=>P(r.endpointName).withFingerprint(r.fingerprint).aboutSessionEnded(d.to)),o.pendingDeliveries.forEach(d=>P(r.endpointName).withFingerprint(r.fingerprint).whenDeliverableTo(d));return}o.type==="deliver"&&((a=(s=o.message)==null?void 0:s.origin)==null?void 0:a.context)&&(o.message.origin.tabId=n,o.message.origin.frameId=i,ee.handleMessage(o.message))})});var{sendMessage:hr,onMessage:G}=ee;Ge(ee);/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Ve=Ke,Je=Object.prototype.toString,V=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ke(e,t,r){var n=r||{},i=n.encode||Qe;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!V.test(e))throw new TypeError("argument name is invalid");var o=i(t);if(o&&!V.test(o))throw new TypeError("argument val is invalid");var s=e+"="+o;if(n.maxAge!=null){var a=n.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(n.domain){if(!V.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!V.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){var l=n.expires;if(!Xe(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+l.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.priority){var m=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(m){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function Qe(e){return encodeURIComponent(e)}function Xe(e){return Je.call(e)==="[object Date]"||e instanceof Date}var Ye={"#animevsub-vsub":"https://animevietsub.lol/","#vuighe":"https://vuighe.net/","#nettruyen":"https://www.nettruyenmax.com/","#fb":"https://www.facebook.com/","#ihentai":"https://ihentai.xyz/","#streamc":"https://embed.streamc.xyz/","#star":""};typeof navigator!="undefined"&&(navigator==null||navigator.userAgent.includes("Firefox"));const Ze="#",ve="_extra",er=typeof btoa=="function",rr=typeof Buffer=="function";typeof TextDecoder=="function"&&new TextDecoder;typeof TextEncoder=="function"&&new TextEncoder;const tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$=Array.prototype.slice.call(tr);(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})($);String.fromCharCode.bind(String);typeof Uint8Array.from=="function"&&Uint8Array.from.bind(Uint8Array);const nr=e=>{let t,r,n,i,o="";const s=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,o+=$[t>>18&63]+$[t>>12&63]+$[t>>6&63]+$[t&63]}return s?o.slice(0,s-3)+"===".substring(s):o},sr=er?e=>btoa(e):rr?e=>Buffer.from(e,"binary").toString("base64"):nr;function or(e){let t="";const r=new Uint8Array(e),n=r.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(r[i]);return sr(t)}let ne,se;async function ir(){return ne||se||(se=N.storage.sync.get("referrers").then(e=>ne=e))}const oe={hosts:["animevsub.netlify.app","animevsub.eu.org","m.animevsub.eu.org","vuitruyen.netlify.app","vuitruyen.eu.org","mangaraiku.eu.org","m.mangaraiku.eu.org","raiku.eu.org","mraiku.eu.org","raiku.netlify.app","mangaraiku.netlify.app","tariteam.github.io/download-video","example.com","localhost","ihentai.netlify.app","ihentai.eu.org","cinevsub.netlify.app","cinevsub.eu.org","cinevsub.pages.dev","cinevsub.nuxt.dev"]},Te={firefox:"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0",chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36",edge:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.41",gbot:"Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)",ybot:"Mozilla/5.0 (compatible; YandexAccessibilityBot/3.0; +http://yandex.com/bots)",achrome:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Mobile Safari/537.36",aedge:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Mobile Safari/537.36 Edg/114.0.1823.41"};let pe=!1;const J=typeof(chrome==null?void 0:chrome.declarativeNetRequest)!="undefined"?chrome.declarativeNetRequest.RuleActionType:{BLOCK:"block",REDIRECT:"redirect",ALLOW:"allow",UPGRADE_SCHEME:"upgradeScheme",MODIFY_HEADERS:"modifyHeaders",ALLOW_ALL_REQUESTS:"allowAllRequests"},A=typeof(chrome==null?void 0:chrome.declarativeNetRequest)!="undefined"?chrome.declarativeNetRequest.HeaderOperation:{APPEND:"append",SET:"set",REMOVE:"remove"},C=typeof(chrome==null?void 0:chrome.declarativeNetRequest)!="undefined"?chrome.declarativeNetRequest.ResourceType:{MAIN_FRAME:"main_frame",SUB_FRAME:"sub_frame",STYLESHEET:"stylesheet",SCRIPT:"script",IMAGE:"image",FONT:"font",OBJECT:"object",XMLHTTPREQUEST:"xmlhttprequest",PING:"ping",CSP_REPORT:"csp_report",MEDIA:"media",WEBSOCKET:"websocket",OTHER:"other"},ar=Object.keys(Te);let R=1;function lr(e,t){var n,i;const r=[{id:R++,priority:1,action:{type:J.MODIFY_HEADERS,requestHeaders:[{header:"Referer",operation:A.SET,value:t}]},condition:{urlFilter:e+"|",resourceTypes:[C.XMLHTTPREQUEST]}},{id:R++,priority:1,action:{type:J.MODIFY_HEADERS,requestHeaders:[{header:"Referer",operation:A.SET,value:t}],responseHeaders:[{header:"Access-Control-Allow-Origin",operation:A.SET,value:"*"},{header:"Access-Control-Allow-Methods",operation:A.SET,value:"PUT, GET, HEAD, POST, DELETE, OPTIONS"}]},condition:{urlFilter:e+ve+"|",resourceTypes:[C.XMLHTTPREQUEST,C.IMAGE,C.MEDIA],initiatorDomains:oe.hosts}}];for(let o=0,s=r.length;o<s;o++){{const a={...JSON.parse(JSON.stringify(r[o])),id:R++};(n=a.action.requestHeaders)==null||n.push({header:"Origin",operation:A.SET,value:t?new URL(t).origin:""}),a.condition={urlFilter:((i=a.condition.urlFilter)==null?void 0:i.slice(0,-1))+"o|",resourceTypes:[C.XMLHTTPREQUEST]},r.push(a)}{const a={...JSON.parse(JSON.stringify(r[o])),id:R++};a.action.requestHeaders.push({header:"Origin",operation:A.REMOVE}),a.condition.urlFilter=a.condition.urlFilter.slice(0,-1)+"ro|",r.push(a)}}return r.forEach(o=>{ar.forEach(s=>{var l,m;const a=JSON.parse(JSON.stringify(o));a.id=R++,(l=a.action.requestHeaders)==null||l.push({header:"User-Agent",operation:A.SET,value:Te[s]}),a.condition.urlFilter=((m=a.condition.urlFilter)==null?void 0:m.slice(0,-1))+"_ua"+s+"|",r.push(a)})}),pe||(r.push({id:R++,priority:999,action:{type:J.MODIFY_HEADERS,requestHeaders:[{header:"Accept-Encoding",operation:A.SET,value:"gzip, deflate, br, zstd"},{header:"Origin",operation:A.REMOVE},{header:"Priority",operation:A.SET,value:"i"},{header:"Referer",operation:A.SET,value:"https://lh3.googleusercontent.com/"},{header:"Sec-Fetch-Dest",operation:A.SET,value:"image"},{header:"Sec-Fetch-Mode",operation:A.SET,value:"no-cors"},{header:"Sec-Fetch-Site",operation:A.SET,value:"cross-site"},{header:"Sec-Gpc",operation:A.SET,value:"1"}],responseHeaders:[{header:"Access-Control-Allow-Origin",operation:A.SET,value:"*"},{header:"Access-Control-Allow-Methods",operation:A.SET,value:"PUT, GET, HEAD, POST, DELETE, OPTIONS"}]},condition:{regexFilter:"^https?://([a-zA-Z0-9-]+\\.)?googleusercontent\\.[a-zA-Z]{2,}(/|$)",resourceTypes:[C.XMLHTTPREQUEST,C.IMAGE,C.MEDIA],initiatorDomains:oe.hosts}},{id:R++,priority:1,action:{type:J.MODIFY_HEADERS,requestHeaders:[{header:"Origin",operation:A.REMOVE},{header:"Referer",operation:A.REMOVE},{header:"Sec-Fetch-Mode",operation:A.REMOVE},{header:"Sec-Fetch-Site",operation:A.REMOVE},{header:"Sec-Gpc",operation:A.REMOVE}],responseHeaders:[{header:"Access-Control-Allow-Origin",operation:A.SET,value:"*"},{header:"Access-Control-Allow-Methods",operation:A.SET,value:"PUT, GET, HEAD, POST, DELETE, OPTIONS"}]},condition:{urlFilter:"#rm-origin|",resourceTypes:[C.XMLHTTPREQUEST,C.IMAGE,C.MEDIA],initiatorDomains:oe.hosts}}),pe=!0),r}function cr(e,t,r=!1){var i;const n=r?"responseHeaders":"requestHeaders";return e[n]=(i=e[n])==null?void 0:i.filter(o=>o.name.toLowerCase()!=t),e}function gr(e,t,r,n=!1){var s;const i=n?"responseHeaders":"requestHeaders",o=(s=e[i])==null?void 0:s.find(a=>a.name.toLowerCase()===t);return o?o.value=r:(e[i]||(e[i]=[]),e[i].push({name:t,value:r})),e}function mr(e,t,r,n=!1){const i=n?"responseHeaders":"requestHeaders";return e[i]||(e[i]=[]),e[i].push({name:t,value:r}),e}const Q=new Map,H={XMLHTTPREQUEST:"xmlhttprequest",IMAGE:"image",MEDIA:"media"};async function ur(e){{e.forEach(r=>{let n=Q.get(r.condition.urlFilter);n||Q.set(r.condition.urlFilter,n=[]),n.push(r)});const t=()=>{e.forEach(r=>{const n=Q.get(r.condition.urlFilter);n&&n.splice(n.indexOf(r)>>>0,1)})};return dr(),t}}let Ae=!1;function dr(){if(Ae)return;Ae=!0;const e=t=>r=>{const n=r.url.slice(r.url.indexOf(Ze)>>>0);if(!n||!r.originUrl)return;const i=r.originUrl.indexOf("://")+3,o=r.originUrl.slice(i,r.originUrl.indexOf("/",i)),s=Q.get(n+"|");if(!!s)return s.forEach(a=>{var l,m;a.action.type==="modifyHeaders"&&(!((l=a.condition.initiatorDomains)!=null&&l.includes(o))||(m=a.action[t?"responseHeaders":"requestHeaders"])==null||m.forEach(d=>{switch(d.operation){case"remove":cr(r,d.header,t);break;case"append":mr(r,d.header,d.value,t);break;case"set":default:gr(r,d.header,d.value,t)}}))}),r};N.webRequest.onBeforeSendHeaders.addListener(e(!1),{urls:["<all_urls>"],types:[H.XMLHTTPREQUEST,H.IMAGE,H.MEDIA]},["requestHeaders","blocking"]),N.webRequest.onHeadersReceived.addListener(e(!0),{urls:["<all_urls>"],types:[H.XMLHTTPREQUEST,H.IMAGE,H.MEDIA]},["responseHeaders","blocking"])}function ae(e){const t=Object.entries(e).reduce((r,[n,i])=>(r.push(...lr(n,i)),r),[]);return ur(t)}const me=Promise.all([ae(Ye),ir().then(e=>ae(e))]);G("set:referrers",async({data:e})=>{await me,await ae(e)});G("get:HASH",async()=>(await me,ve));const Se=new class{constructor(){this.store=new Map,G("http:aborted",({data:{signalId:t}})=>{var r;(r=Se.store.get(t))==null||r()})}on(t,r){return this.store.set(t,r),()=>this.store.delete(t)}};async function fr({url:e,headers:t,responseType:r,signalId:n,method:i,data:o}){let s;o&&(typeof o=="object"?(s=new FormData,Object.entries(o!=null?o:{}).forEach(([m,d])=>s.append(m,d))):s=o);let a,l;if(n){const m=new AbortController;a=m.signal,n===!0?m.abort():l=Se.on(n,()=>{m.abort(),l==null||l()})}return await me,t!=null&&t["c-cookie"]&&await Ar(e,t["c-cookie"]),fetch(e,{headers:new Headers(t),credentials:"include",signal:a,method:i,body:s}).then(async m=>(l==null||l(),{headers:await pr(m.headers,m.url),data:r==="arraybuffer"?await m.arrayBuffer().then(or):await m.text(),url:m.url,status:m.status})).catch(m=>{throw l==null||l(),m})}G("http:request",({data:e})=>fr(e));async function pr(e,t){const r=Object.fromEntries(e.entries());return r["set-cookie"]=(await N.cookies.getAll({url:t})).map(n=>Ve(n.name,n.value,{...n,sameSite:"none",...n.expirationDate?{expires:new Date(Date.now()+n.expirationDate)}:{}})).join(","),r}G("tabs",async({data:e})=>N.tabs[e.type].apply(N.tabs,e.args));async function Ar(e,t){return Promise.all(t.split(";").map(async r=>{const n=r.indexOf("=");if(n===-1)return;const i=r.slice(0,n),o=r.slice(n+1);await chrome.cookies.set({domain:new URL(e).hostname,name:i,path:"/",value:o,url:e,httpOnly:!0,secure:!1,storeId:"0"})}))}
